/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

CREATE DATABASE IF NOT EXISTS `yatasimm` /*!40100 DEFAULT CHARACTER SET utf8 */;
USE `yatasimm`;

CREATE TABLE IF NOT EXISTS `BLOG` (
  `ID_BLOG` int(10) unsigned NOT NULL,
  `TMS` timestamp NOT NULL DEFAULT current_timestamp(),
  `TYPE` tinyint(4) DEFAULT 0,
  `TARGET` varchar(32) DEFAULT NULL,
  `TITLE` varchar(255) DEFAULT NULL,
  `SUMMARY` text DEFAULT NULL,
  `DATA` text DEFAULT NULL,
  PRIMARY KEY (`ID_BLOG`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*!40000 ALTER TABLE `BLOG` DISABLE KEYS */;
/*!40000 ALTER TABLE `BLOG` ENABLE KEYS */;

CREATE TABLE IF NOT EXISTS `CAMERAS` (
  `CAMERA` varchar(32) NOT NULL,
  `DESCR` varchar(64) NOT NULL,
  `EXCHANGE` int(11) NOT NULL,
  `ACTIVE` tinyint(4) DEFAULT 1,
  `TOKEN` varchar(255) DEFAULT NULL,
  `USR` varchar(64) DEFAULT NULL,
  `PWD` varchar(64) DEFAULT NULL,
  `CC` varchar(512) DEFAULT NULL,
  PRIMARY KEY (`CAMERA`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*!40000 ALTER TABLE `CAMERAS` DISABLE KEYS */;
INSERT INTO `CAMERAS` (`CAMERA`, `DESCR`, `EXCHANGE`, `ACTIVE`, `TOKEN`, `USR`, `PWD`, `CC`) VALUES
	('CASH', 'FIAT Externo', 0, 0, NULL, NULL, NULL, NULL),
	('DEFAULT', 'Camara general', 0, 1, NULL, NULL, NULL, NULL);
/*!40000 ALTER TABLE `CAMERAS` ENABLE KEYS */;

CREATE TABLE IF NOT EXISTS `FLOWS` (
  `ID_OPER` int(10) unsigned NOT NULL,
  `ID_FLOW` int(10) unsigned NOT NULL,
  `TYPE` tinyint(4) NOT NULL,
  `CURRENCY` varchar(18) NOT NULL,
  `AMOUNT` double NOT NULL,
  `PRICE` double NOT NULL,
  `TMS` timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (`ID_OPER`,`ID_FLOW`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*!40000 ALTER TABLE `FLOWS` DISABLE KEYS */;
/*!40000 ALTER TABLE `FLOWS` ENABLE KEYS */;

CREATE TABLE IF NOT EXISTS `HIST_POSITION` (
  `DATE_POS` date NOT NULL,
  `CAMERA` varchar(10) NOT NULL,
  `CURRENCY` varchar(10) NOT NULL,
  `BALANCE` double DEFAULT 0,
  `AVAILABLE` double DEFAULT 0,
  `BUY_HIGH` double DEFAULT 0,
  `BUY_LOW` double DEFAULT 0,
  `BUY_LAST` double DEFAULT 0,
  `BUY_NET` double DEFAULT 0,
  `SELL_HIGH` double DEFAULT 0,
  `SELL_LOW` double DEFAULT 0,
  `SELL_LAST` double DEFAULT 0,
  `SELL_NET` double DEFAULT 0,
  `BUY` double DEFAULT 0,
  `SELL` double DEFAULT 0,
  `VALUE` double DEFAULT 0,
  `PROFIT` double DEFAULT 0,
  `TMS` timestamp NOT NULL DEFAULT current_timestamp(),
  `LAST` timestamp NOT NULL DEFAULT current_timestamp(),
  `CC` varchar(512) DEFAULT NULL,
  PRIMARY KEY (`DATE_POS`,`CAMERA`,`CURRENCY`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*!40000 ALTER TABLE `HIST_POSITION` DISABLE KEYS */;
/*!40000 ALTER TABLE `HIST_POSITION` ENABLE KEYS */;

CREATE TABLE IF NOT EXISTS `OPERATIONS` (
  `ID_OPER` int(10) unsigned NOT NULL,
  `TYPE` tinyint(4) NOT NULL,
  `CAMERA` varchar(10) NOT NULL,
  `BASE` varchar(10) NOT NULL,
  `COUNTER` varchar(10) NOT NULL,
  `AMOUNT` double NOT NULL,
  `VALUE` double DEFAULT 0,
  `PRICE` double NOT NULL,
  `ACTIVE` tinyint(4) DEFAULT 1,
  `STATUS` tinyint(4) DEFAULT 0,
  `PARENT` int(10) unsigned DEFAULT 0,
  `TMS` timestamp NOT NULL DEFAULT current_timestamp(),
  `TMS_LAST` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`ID_OPER`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*!40000 ALTER TABLE `OPERATIONS` DISABLE KEYS */;
/*!40000 ALTER TABLE `OPERATIONS` ENABLE KEYS */;

CREATE TABLE IF NOT EXISTS `OPERATIONS_CONTROL` (
  `ID_OPER` int(10) unsigned NOT NULL,
  `FEE` double DEFAULT 0,
  `GAS` double DEFAULT 0,
  `TARGET` double DEFAULT 0,
  `STOP` double DEFAULT 0,
  `LIMITE` double DEFAULT 0,
  `DEADLINE` int(11) DEFAULT 0,
  `AMOUNT_IN` double NOT NULL,
  `PRICE_IN` double NOT NULL,
  `AMOUNT_OUT` double DEFAULT 0,
  `PRICE_OUT` double DEFAULT 0,
  `EXPENSE` double DEFAULT 0,
  `PROFIT` double DEFAULT 0,
  `ALIVE` int(11) DEFAULT 0,
  `RANK` int(11) DEFAULT 0,
  `ALERT` tinyint(4) DEFAULT 0,
  `TMS_ALERT` date DEFAULT NULL,
  PRIMARY KEY (`ID_OPER`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*!40000 ALTER TABLE `OPERATIONS_CONTROL` DISABLE KEYS */;
/*!40000 ALTER TABLE `OPERATIONS_CONTROL` ENABLE KEYS */;

CREATE TABLE IF NOT EXISTS `OPERATIONS_LOG` (
  `ID_OPER` int(10) unsigned NOT NULL,
  `ID_LOG` int(10) unsigned NOT NULL,
  `TMS` timestamp NOT NULL DEFAULT current_timestamp(),
  `TYPE` tinyint(4) DEFAULT 0,
  `REASON` int(11) DEFAULT 0,
  `COMMENT` text DEFAULT NULL,
  PRIMARY KEY (`ID_OPER`,`ID_LOG`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*!40000 ALTER TABLE `OPERATIONS_LOG` DISABLE KEYS */;
/*!40000 ALTER TABLE `OPERATIONS_LOG` ENABLE KEYS */;

CREATE TABLE IF NOT EXISTS `POSITION` (
  `CAMERA` varchar(10) NOT NULL,
  `CURRENCY` varchar(10) NOT NULL,
  `BALANCE` double DEFAULT 0,
  `AVAILABLE` double DEFAULT 0,
  `BUY_HIGH` double DEFAULT 0,
  `BUY_LOW` double DEFAULT 0,
  `BUY_LAST` double DEFAULT 0,
  `BUY_NET` double DEFAULT 0,
  `SELL_HIGH` double DEFAULT 0,
  `SELL_LOW` double DEFAULT 0,
  `SELL_LAST` double DEFAULT 0,
  `SELL_NET` double DEFAULT 0,
  `BUY` double DEFAULT 0,
  `SELL` double DEFAULT 0,
  `VALUE` double DEFAULT 0,
  `PROFIT` double DEFAULT 0,
  `TMS` timestamp NOT NULL DEFAULT current_timestamp(),
  `LAST` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `CC` varchar(512) DEFAULT NULL,
  PRIMARY KEY (`CAMERA`,`CURRENCY`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*!40000 ALTER TABLE `POSITION` DISABLE KEYS */;
INSERT INTO `POSITION` (`CAMERA`, `CURRENCY`, `BALANCE`, `AVAILABLE`, `BUY_HIGH`, `BUY_LOW`, `BUY_LAST`, `BUY_NET`, `SELL_HIGH`, `SELL_LOW`, `SELL_LAST`, `SELL_NET`, `BUY`, `SELL`, `VALUE`, `PROFIT`, `TMS`, `LAST`, `CC`) VALUES
	('CASH', '$FIAT', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, '2022-03-25 14:25:59', '2022-03-25 14:25:59', NULL),
	('CASH', 'FIAT', 10000, 10000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, '2022-03-04 13:29:53', '2022-03-04 13:29:53', NULL),
	('DEFAULT', '$FIAT', 10000, 10000, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, '2022-03-25 14:25:59', '2022-03-25 14:25:59', NULL);
/*!40000 ALTER TABLE `POSITION` ENABLE KEYS */;

CREATE TABLE IF NOT EXISTS `REGULARIZATION` (
  `ID` int(10) unsigned NOT NULL,
  `CAMERA` varchar(10) NOT NULL,
  `CURRENCY` varchar(10) NOT NULL,
  `DATE_REG` date NOT NULL,
  `BALANCE` double DEFAULT 0,
  `AVAILABLE` double DEFAULT 0,
  `BUY_HIGH` double DEFAULT 0,
  `BUY_LOW` double DEFAULT 0,
  `BUY_LAST` double DEFAULT 0,
  `BUY_NET` double DEFAULT 0,
  `SELL_HIGH` double DEFAULT 0,
  `SELL_LOW` double DEFAULT 0,
  `SELL_LAST` double DEFAULT 0,
  `SELL_NET` double DEFAULT 0,
  `BUY` double DEFAULT 0,
  `SELL` double DEFAULT 0,
  `VALUE` double DEFAULT 1,
  `PROFIT` double DEFAULT 0,
  `PERIOD` int(11) DEFAULT NULL,
  `ID_OPER` int(10) unsigned NOT NULL,
  `TMS` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `LAST` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`CAMERA`,`CURRENCY`,`DATE_REG`,`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*!40000 ALTER TABLE `REGULARIZATION` DISABLE KEYS */;
/*!40000 ALTER TABLE `REGULARIZATION` ENABLE KEYS */;

CREATE TABLE IF NOT EXISTS `TRANSFERS` (
  `ID_XFER` int(10) unsigned NOT NULL,
  `CAMERA_OUT` varchar(10) NOT NULL,
  `CAMERA_IN` varchar(10) NOT NULL,
  `CURRENCY` varchar(10) NOT NULL,
  `AMOUNT` double NOT NULL,
  `VALUE` double NOT NULL,
  `TMS` timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (`ID_XFER`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*!40000 ALTER TABLE `TRANSFERS` DISABLE KEYS */;
/*!40000 ALTER TABLE `TRANSFERS` ENABLE KEYS */;

/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS IS NULL, 1, @OLD_FOREIGN_KEY_CHECKS) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
